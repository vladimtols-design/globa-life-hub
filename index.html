<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GlobaLife Hub</title>
<link rel="stylesheet" href="./style.css">
</head>
<body>

<header>
  <h1>üåç GlobaLife Hub</h1>
  <p>–ü–æ–≥–æ–¥–∞ ‚Ä¢ –ê–Ω–µ–∫–¥–æ—Ç—ã ‚Ä¢ –ù–æ–≤–æ—Å—Ç–∏ ‚Ä¢ –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è ‚Ä¢ –ó–¥–æ—Ä–æ–≤—å–µ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ!</p>
  <div id="admin-indicator" class="admin-indicator" style="display:none;">–†–ï–ñ–ò–ú –ê–î–ú–ò–ù–ê</div>
</header>

<div id="admin-panel" class="admin-panel" style="display:none;">
  <h3>üõ†Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
  <button class="admin-btn" onclick="toggleEditMode()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏</button>
  <button class="admin-btn reset" onclick="resetCounters()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Å—á—ë—Ç—á–∏–∫–∏</button>
  
  <div>
    <p><strong>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ —Ñ–∞–π–ª–∞:</strong></p>
    <input type="file" id="content-file" accept=".json" />
    <div id="file-drop">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞ JSON-—Ñ–∞–π–ª —Å –Ω–æ–≤—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</div>
  </div>
</div>

<!-- –ë–õ–û–ö: –ü–æ–≥–æ–¥–∞ -->
<div class="block" data-block="weather" style="background: var(--weather-bg);">
  <div class="block-header">
    <div class="block-title">üå§Ô∏è –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã</div>
    <div class="counter" data-counter="weather">0</div>
  </div>
  <img class="block-image" src="./R.jpeg"  alt="–ü–æ–≥–æ–¥–∞" style="max-width: 100px; max-width:100px;">
  <div class="content" data-content="weather">–°–æ–ª–Ω–µ—á–Ω–æ, +22¬∞C. –õ—ë–≥–∫–∏–π –≤–µ—Ç–µ—Ä–æ–∫ —Å –∑–∞–ø–∞–¥–∞.</div>
</div>

<!-- –ë–õ–û–ö: –ê–Ω–µ–∫–¥–æ—Ç—ã -->
<div class="block" data-block="joke" style="background: var(--joke-bg);">
  <div class="block-header">
    <div class="block-title">üòÇ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –∞–Ω–µ–∫–¥–æ—Ç—ã</div>
    <div class="counter" data-counter="joke">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1511795409834-1d2e8c5a4b8e?auto=format&fit=crop&w=600&h=160&q=80" alt="–ê–Ω–µ–∫–¥–æ—Ç—ã">
  <div class="content" data-content="joke">–ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –Ω–µ –ª—é–±—è—Ç –ø—Ä–∏—Ä–æ–¥—É? –¢–∞–º —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ bugs!</div>
</div>

<!-- –ë–õ–û–ö: –ù–æ–≤–æ—Å—Ç–∏ -->
<div class="block" data-block="news" style="background: var(--news-bg);">
  <div class="block-header">
    <div class="block-title">üì∞ –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</div>
    <div class="counter" data-counter="news">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1495020689705-35212d25b50f?auto=format&fit=crop&w=600&h=160&q=80" alt="–ù–æ–≤–æ—Å—Ç–∏">
  <div class="content" data-content="news">‚Ä¢ –ü–æ–¥–ø–∏—Å–∞–Ω–æ –Ω–æ–≤–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –∫–ª–∏–º–∞—Ç—É.<br>‚Ä¢ –û—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π –≤–∏–¥ –º–æ—Ä—Å–∫–∏—Ö —á–µ—Ä–µ–ø–∞—Ö –≤ –¢–∏—Ö–æ–º –æ–∫–µ–∞–Ω–µ.</div>
</div>

<!-- –ë–õ–û–ö: –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã -->
<div class="block" data-block="market" style="background: var(--market-bg);">
  <div class="block-header">
    <div class="block-title">üõí –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã</div>
    <div class="counter" data-counter="market">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=600&h=160&q=80" alt="–ú–∞–≥–∞–∑–∏–Ω—ã">
  <div class="content" data-content="market">
    <a href="https://amazon.com" target="_blank">Amazon</a> ‚Ä¢ 
    <a href="https://aliexpress.com" target="_blank">AliExpress</a> ‚Ä¢ 
    <a href="https://ebay.com" target="_blank">eBay</a>
  </div>
</div>

<!-- –ë–õ–û–ö: –ê–≤–∏–∞–±–∏–ª–µ—Ç—ã -->
<div class="block" data-block="flight" style="background: var(--flight-bg);">
  <div class="block-header">
    <div class="block-title">‚úàÔ∏è –ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</div>
    <div class="counter" data-counter="flight">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?auto=format&fit=crop&w=600&h=160&q=80" alt="–°–∞–º–æ–ª—ë—Ç">
  <div class="content" data-content="flight">–ü–æ–∏—Å–∫ –¥–µ—à—ë–≤—ã—Ö –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ <a href="https://aviasales.ru" target="_blank">Aviasales</a></div>
</div>

<!-- –ë–õ–û–ö: –ü—É—Ç—ë–≤–∫–∏ -->
<div class="block" data-block="resort" style="background: var(--resort-bg);">
  <div class="block-header">
    <div class="block-title">üèñÔ∏è –ü—É—Ç—ë–≤–∫–∏ –Ω–∞ –∫—É—Ä–æ—Ä—Ç—ã</div>
    <div class="counter" data-counter="resort">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1503551723145-6c04cb24f338?auto=format&fit=crop&w=600&h=160&q=80" alt="–ü–ª—è–∂">
  <div class="content" data-content="resort">–¢—É—Ä—ã –≤ –¢—É—Ä—Ü–∏—é, –ò—Ç–∞–ª–∏—é, –û–ê–≠ –æ—Ç <a href="https://level.travel" target="_blank">Level.Travel</a></div>
</div>

<!-- –ë–õ–û–ö: –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ -->
<div class="block" data-block="book" style="background: var(--book-bg);">
  <div class="block-header">
    <div class="block-title">üìö –†–∞—Å—Å–∫–∞–∑—ã –∏ –ø–æ–≤–µ—Å—Ç–∏</div>
    <div class="counter" data-counter="book">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1463051873739-7a697c8a758a?auto=format&fit=crop&w=600&h=160&q=80" alt="–ö–Ω–∏–≥–∏">
  <div class="content" data-content="book">–°–µ–≥–æ–¥–Ω—è —á–∏—Ç–∞–µ–º: ¬´–ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞¬ª ‚Äî –ú. –ë—É–ª–≥–∞–∫–æ–≤</div>
</div>

<!-- –ë–õ–û–ö: –ó–û–ñ -->
<div class="block" data-block="health" style="background: var(--health-bg);">
  <div class="block-header">
    <div class="block-title">üçè –ó–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</div>
    <div class="counter" data-counter="health">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1490946140681-fec27eb62124?auto=format&fit=crop&w=600&h=160&q=80" alt="–ó–û–ñ">
  <div class="content" data-content="health">–í—ã–ø–∏–≤–∞–π—Ç–µ —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è.</div>
</div>

<!-- –ë–õ–û–ö: –ü–∞—Ä—Ç–Ω—ë—Ä—ã -->
<div class="block" data-block="partner" style="background: var(--partner-bg);">
  <div class="block-header">
    <div class="block-title">ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</div>
    <div class="counter" data-counter="partner">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1552664730-d307ca884978?auto=format&fit=crop&w=600&h=160&q=80" alt="–ü–∞—Ä—Ç–Ω—ë—Ä—ã">
  <div class="content" data-content="partner">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–∏–º –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ!</div>
</div>

<!-- –ë–õ–û–ö: –û—Ç–∑—ã–≤—ã -->
<div class="block" data-block="review" style="background: var(--review-bg);">
  <div class="block-header">
    <div class="block-title">üí¨ –û—Ç–∑—ã–≤—ã –æ —Å–∞–π—Ç–µ</div>
    <div class="counter" data-counter="review">0</div>
  </div>
  <img class="block-image" src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=600&h=160&q=80" alt="–û—Ç–∑—ã–≤—ã">
  <div class="content" data-content="review">¬´–õ—É—á—à–∏–π —Å–∞–π—Ç –∑–∞ –≤—Å—é –º–æ—é –∂–∏–∑–Ω—å!¬ª ‚Äî –ú–∞—Ä–∏–Ω–∞, 34</div>
</div>

<footer>
  <p>¬© 2025 GlobaLife Hub | –ù–∞–∂–º–∏—Ç–µ <strong>Ctrl + Shift + A</strong> –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω-—Ä–µ–∂–∏–º</p>
  <p>–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
</footer>

<script>
  const ADMIN_SECRET = 'admin123';
  const SITE_DATA_KEY = 'globa_site_data_v2';
  const COUNTERS_KEY = 'globa_counters_v2';

  document.addEventListener('DOMContentLoaded', () => {
    loadPersistedData();
    initViewCounters();
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.shiftKey && e.key === 'A') {
        e.preventDefault();
        enterAdminMode();
      }
    });
    setupFileDrop();
  });

  function loadPersistedData() {
    const saved = localStorage.getItem(SITE_DATA_KEY);
    const counters = localStorage.getItem(COUNTERS_KEY);
    if (saved) {
      const data = JSON.parse(saved);
      Object.entries(data).forEach(([blockId, content]) => {
        const el = document.querySelector(`[data-content="${blockId}"]`);
        if (el) el.innerHTML = content;
      });
    }
    if (counters) {
      const cnt = JSON.parse(counters);
      Object.entries(cnt).forEach(([blockId, value]) => {
        const el = document.querySelector(`[data-counter="${blockId}"]`);
        if (el) el.textContent = value;
      });
    }
  }

  function saveAllData() {
    const content = {};
    document.querySelectorAll('[data-content]').forEach(el => {
      content[el.dataset.content] = el.innerHTML;
    });
    localStorage.setItem(SITE_DATA_KEY, JSON.stringify(content));

    const counters = {};
    document.querySelectorAll('[data-counter]').forEach(el => {
      counters[el.dataset.counter] = el.textContent;
    });
    localStorage.setItem(COUNTERS_KEY, JSON.stringify(counters));
  }

  function initViewCounters() {
    const blocks = document.querySelectorAll('.block');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const blockId = entry.target.dataset.block;
          const counterEl = document.querySelector(`[data-counter="${blockId}"]`);
          if (counterEl && !entry.target.dataset.viewed) {
            counterEl.textContent = (parseInt(counterEl.textContent) || 0) + 1;
            entry.target.dataset.viewed = 'true';
            saveAllData();
          }
        }
      });
    }, { threshold: 0.25 });
    blocks.forEach(block => observer.observe(block));
  }

  function enterAdminMode() {
    const input = prompt('üîí –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:');
    if (input === ADMIN_SECRET) {
      document.getElementById('admin-panel').style.display = 'block';
      document.getElementById('admin-indicator').style.display = 'block';
      alert('‚úÖ –ê–¥–º–∏–Ω-—Ä–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω!');
    } else if (input !== null) {
      alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
    }
  }

  function toggleEditMode() {
    const contents = document.querySelectorAll('[data-content]');
    const isEditable = contents[0].getAttribute('contenteditable') === 'true';
    contents.forEach(el => {
      el.contentEditable = !isEditable;
    });
    if (!isEditable) {
      contents.forEach(el => {
        const handler = () => { saveAllData(); };
        el.addEventListener('blur', handler);
        el.addEventListener('input', handler);
      });
    }
  }

  function resetCounters() {
    if (!confirm('‚ùó –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –í–°–ï —Å—á—ë—Ç—á–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π?')) return;
    document.querySelectorAll('[data-counter]').forEach(el => {
      el.textContent = '0';
    });
    saveAllData();
    alert('‚úÖ –°—á—ë—Ç—á–∏–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã!');
  }

  function setupFileDrop() {
    const dropZone = document.getElementById('file-drop');
    const fileInput = document.getElementById('content-file');

    ['dragover', 'dragenter'].forEach(evt => {
      dropZone.addEventListener(evt, (e) => {
        e.preventDefault();
        e.stopPropagation();
      });
    });

    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      e.stopPropagation();
      const file = e.dataTransfer.files[0];
      if (file && file.name.endsWith('.json')) {
        readFileAsJSON(file);
      }
    });

    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) readFileAsJSON(file);
    });
  }

  function readFileAsJSON(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const data = JSON.parse(e.target.result);
        Object.entries(data).forEach(([key, value]) => {
          const el = document.querySelector(`[data-content="${key}"]`);
          if (el) el.innerHTML = value;
        });
        saveAllData();
        alert('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
      } catch (err) {
        alert('‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–π–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º JSON');
      }
    };
    reader.readAsText(file);
  }
</script>

</body>
</html>